# CI/CD Flow - 2024/08/31 #

## Context

To make available the pytomation package on PyPi indexes, needs a CI and CD flow that generates a wheel package,
run the tests, build the code, and publish the final package.

It needs to find an approach that works with a single commiter and manual release methodology without a big effort.

## Decision

- **Trunk Development flow**
  - Short-lived branches with PR squash merge explaining new code changes and forced to pass the GitHub checks. Must be
    small changes
  - Manual releases using tags from main branch
  - Blocked pushing to main without PR 
- **Publish**
  - Only publish packages to main PyPi from manual GitHub releases
  - Publish to test pypi package all main commits
- **CI**
  - Run on every push the build, lint, test and package actions
  - Use GitHub checks to protect merge actions on no compliant code
  - Use shared cache to improve performance and time consumption

## Consequences

- Create new CI workflow to build, run tests and lint for all pushes on branches
- Add a package step and deploy to test pypi if the branch is main
- Create a workflow for a new releases to deploy the current package to a production pypi index
